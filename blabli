blueprint:
  name: Notification Blueprint
  description: Envoie une notification avec un message et un titre optionnel sur un smartphone Android ou iOS.
  domain: automation
  input:
    message:
      name: Message
      description: Le contenu de la notification
      selector:
        text
    title:
      name: Titre (optionnel)
      description: Le titre de la notification
      selector:
        text
    device_id:
      name: Appareil
      description: L'appareil sur lequel envoyer la notification
      selector:
        device:
          integration: mobile_app

trigger:
  - device_id: !input device_id
    domain: mqtt
    type: action
    subtype: on_press

condition: []

action:
  - choose:
      - conditions:
          - condition: template
            value_template: "{{ title != '' }}"
        sequence:
          - service: notify.mobile_app_{{ device_id }}
            data:
              message: !input message
              title: !input title
    default:
      - service: notify.mobile_app_{{ device_id }}
        data:
          message: !input message
mode: single
