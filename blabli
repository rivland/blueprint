blueprint:
  name: Notification Blueprint
  description: Envoie une notification avec un message et un titre optionnel sur un smartphone Android ou iOS.
  domain: automation
  input:
    message:
      name: Message
      description: Le contenu de la notification
      selector:
        text:
    title:
      name: Titre
      description: Le titre de la notification
      selector:
        text:
    device:
      name: Appareil
      description: L'appareil sur lequel envoyer la notification
      selector:
        device:
          integration: mobile_app

trigger:
  platform: mqtt
  device_id: !input device
  type: action
  subtype: on_press
  trigger: device

condition: []

action:
  - choose:
      - conditions:
          - "{{ title != '' }}"
        sequence:
          - service: notify.mobile_app_{{ device }}
            data:
              message: !input message
              title: !input title
    default:
      - service: notify.mobile_app_{{ device }}
        data:
          message: !input message
mode: single
